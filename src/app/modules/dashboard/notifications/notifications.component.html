<div class=" py-2 bg-gray-100 h-full flex flex-col min-h-0">
  <div class="px-4">
    <span class="text-3xl my-2 capitalize"><i class="fas fa-bell mx-2"></i>{{ 'notifications' | translate }}</span>
    <hr>
  </div>
  <div class="mt-5 grid grid-cols-5 flex-grow min-h-0 ">
    <div class="col-span-1 h-full overflow-auto min-h-0 ">
      <div
        *ngFor="let not of notifications; let ind = index"
      >
        <div class="flex items-center justify-center relative" *ngIf="allowToShowDate(ind)" >
          <span class="bg-gray-100 px-1 z-10 text-xs">{{ not.notification.createdAt | date: 'mediumDate' }}</span>
          <div class="bg-gray-600 w-1/5 h-[1px] absolute"></div>
        </div>
        <div
          [class.selected]="selectedNotification && selectedNotification.id == not.id"
          (click)="selectNotification(not)"
          class="notification-item flex justify-between mx-2 bg-white my-2 border border-gray-500"
        >
          <span>{{ not.notification.text }}</span>
          <div class="flex flex-col justify-center items-center">
            <div *ngIf="not.state == 'sent'" class="w-4 h-4 bg-primary rounded-full"></div>
            <span class="text-xs mt-2">{{ not.notification.createdAt | date: 'shortTime' }}</span>
          </div>
        </div>
      </div>
    </div>


    <div class="h-full flex col-span-4 text-center p-4 border-l border-gray-400 items-center" [class.bg-white]="selectedNotification">
      <div class="flex h-full w-full items-center justify-center" *ngIf="!selectedNotification || loading">
        <img *ngIf="!selectedNotification && !loading" class="w-1/3" src="./../../../../assets/notification.svg" alt="">
        <div *ngIf="loading" class="w-20 h-20 bg-primary rounded-full animate-ping">
        </div>
      </div>
      <div class="px-60 w-full" *ngIf="selectedNotification && !loading">
        <div class="bg-gray-100 border border-gray-400 rounded-xl px-8 py-4 w-full">
          <div class="text-center">
            <i class="fas fa-bell text-3xl my-2"></i>
            <span class="text-2xl font-bold uppercase block">{{ selectedNotification.notification.text }}</span>
          </div>
          <table class="mt-10 mb-6 text-right w-full" *ngIf="store">
            <tr>
              <td>{{ 'store_name' | translate }}</td>
              <td>{{ store.storeName }}</td>
            </tr>
            <tr>
              <td>{{ 'owner' | translate }}</td>
              <td>{{ store.account.name }}</td>
            </tr>
            <tr>
              <td>{{ 'phone_number' | translate }}</td>
              <td>{{ store.account.phoneNumber }}</td>
            </tr>
            <tr>
              <td>{{ 'address' | translate }}</td>
              <td>{{ store.account.address }}</td>
            </tr>
            <tr>
              <td>{{ 'longitude' | translate }}</td>
              <td>{{ store.account.longitude }}</td>
            </tr>
            <tr>
              <td>{{ 'latitude' | translate }}</td>
              <td>{{ store.account.latitude }}</td>
            </tr>
          </table>
          <div class="text-xl">
             <span *ngIf="selectedNotification.state == 'accepted'" class="text-green-500 block capitalize"><i class="fas fa-check"></i> {{ 'accepted' | translate }}</span>
             <span *ngIf="selectedNotification.state == 'rejected'" class="text-red-500 block capitalize"><i class="fas fa-times"></i> {{ 'rejected' | translate }}</span>
          </div>
          <div *ngIf="!['accepted', 'rejected'].includes(selectedNotification.state)" class="grid grid-cols-2 mt-4 gap-4">
            <button (click)="accept()" class="custom-button capitalize">{{ 'accept' | translate}}</button>
            <button (click)="reject()" class="outline-button capitalize">{{ 'reject' | translate}}</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
