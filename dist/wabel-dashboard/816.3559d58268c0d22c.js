"use strict";(self.webpackChunkwabel_dashboard=self.webpackChunkwabel_dashboard||[]).push([[816],{8816:(A,u,i)=>{i.r(u),i.d(u,{ClientModule:()=>U});var d=i(7533),h=i(6672),c=i(6019),f=i(8239),e=i(3668),s=i(7109),b=i(3798),g=i(7236),v=i(646),m=i(8745);function y(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).enable()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ENABLED")))}function C(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).enable()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"CREATED")," "))}function _(n,r){if(1&n&&(e.TgZ(0,"div",5),e.YNc(1,y,3,3,"button",6),e.YNc(2,C,3,3,"button",7),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",0==t.user.active),e.xp6(1),e.Q6J("ngIf",1==t.user.active)}}function w(n,r){1&n&&(e.TgZ(0,"div",5),e.TgZ(1,"button",10),e._UZ(2,"i"),e.qZA(),e.qZA()),2&n&&(e.xp6(1),e.Q6J("routerLink","/dashboard/clients/form/edit"),e.xp6(1),e.Tol("fas fa-edit"))}function x(n,r){if(1&n&&e._UZ(0,"app-table",11),2&n){const t=e.oxw();e.Q6J("bottomBorderTitle",!0)("headers",t.headers)("rowButtons",t.buttons)("tableButtons",t.tableButtons)("deleteURL","events/users/"+t.user.id+":id")("retrieveURL","events/users/"+t.user.id)("editLink","/dashboard/events/form/edit")("createLink","/dashboard/events/form/create")("createLinkQueryId",t.user.id)("showSortFilter",!1)("showDeleteButton",!1)}}let B=(()=>{class n{constructor(t,o){this.route=t,this.dataService=o,this.headers=[{name:"id",title:"id",hidden:!0,value:""},{name:"name",title:"name",search:!0},{name:"type",title:"type"},{name:"date_from",title:"date_from"},{name:"date_to",title:"date_to"},{name:"created_at",title:"created_at",type:"date"}],this.tableButtons=[],this.buttons=[]}ngOnInit(){var t=this;return(0,f.Z)(function*(){t.getDataId()})()}monthBefore(){const t=new Date;return[...new Array(31).keys()].map((o,l)=>(l&&t.setDate(t.getDate()-1),t.getDate()+" "+t.toString().slice(4,7))).reverse()}getDataId(){this.route.queryParamMap.subscribe(t=>{const o=t.get("id");o&&(this.userId=+o),this.initTableButtons()}),this.getUser()}initTableButtons(){const t=this.user?this.user.id:this.userId;console.log(this.user),this.tableButtons=[{name:"block",title:"block",icon:"fas fa-ban",color:"blue",dataField:"events.id",request:{url:"events/users/"+t,method:"delete"},confirmation:{title:"are_you_sure",text:"block_event_conf_msg",confirmButtonText:"yes",confirmButtonColor:"red",showCancelButton:!0,cancelButtonText:"no",icon:"warning"}}]}getUser(){this.dataService.sendGetRequest(this.userId?"users/"+this.userId:"profile",{}).subscribe({next:o=>{this.user=o,this.initTableButtons()},error:o=>{this.profileError=o}})}enable(){console.log(67),this.dataService.sendPutRequest("users/enable/"+this.userId,{}).subscribe({next:t=>{0==this.user.active?this.user.active=1:1==this.user.active&&(this.user.active=0)},error:t=>{console.log(t)}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(s.gz),e.Y36(b.D))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-client-display"]],decls:8,vars:9,consts:[[1,"p-4","bg-gray-100","h-full","overflow-auto"],[3,"title","profile","profileError"],["class","header-buttons",4,"ngIf"],[3,"loading"],["pluralName","particular_events","singleName","particular_event","primaryKey","id","displayLink","/dashboard/events/display","icon","fa-calendar-alt fas",3,"bottomBorderTitle","headers","rowButtons","tableButtons","deleteURL","retrieveURL","editLink","createLink","createLinkQueryId","showSortFilter","showDeleteButton",4,"ngIf"],[1,"header-buttons"],["type","button","class","outline-none text-white bg-green-700 hover:bg-green-800 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2 ",3,"click",4,"ngIf"],["type","button","class","outline-none text-white bg-red-700 hover:bg-red-800  font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2 ",3,"click",4,"ngIf"],["type","button",1,"outline-none","text-white","bg-green-700","hover:bg-green-800","font-medium","rounded-lg","text-sm","px-5","py-2.5","mr-2","mb-2",3,"click"],["type","button",1,"outline-none","text-white","bg-red-700","hover:bg-red-800","font-medium","rounded-lg","text-sm","px-5","py-2.5","mr-2","mb-2",3,"click"],[1,"row-btn","color-transition","hover:bg-primary","hover:text-white",3,"routerLink"],["pluralName","particular_events","singleName","particular_event","primaryKey","id","displayLink","/dashboard/events/display","icon","fa-calendar-alt fas",3,"bottomBorderTitle","headers","rowButtons","tableButtons","deleteURL","retrieveURL","editLink","createLink","createLinkQueryId","showSortFilter","showDeleteButton"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"app-display",1),e.ALo(2,"translate"),e.YNc(3,_,3,2,"div",2),e.YNc(4,w,3,3,"div",2),e.qZA(),e._UZ(5,"br"),e._UZ(6,"app-loading-line",3),e.YNc(7,x,1,11,"app-table",4),e.qZA()),2&t&&(e.xp6(1),e.Q6J("title",e.lcZ(2,7,"client_details")+" / "+(o.user?o.user.name:""))("profile",o.user?o.user:null)("profileError",o.profileError),e.xp6(2),e.Q6J("ngIf",o.user&&0==o.user.role),e.xp6(1),e.Q6J("ngIf",o.user&&1==o.user.role),e.xp6(2),e.Q6J("loading",!1),e.xp6(1),e.Q6J("ngIf",o.user))},directives:[g.D,c.O5,v.R,s.rH,m.a],pipes:[d.X$],styles:[".row-btn[_ngcontent-%COMP%]{margin-left:.25rem;margin-right:.25rem;border-radius:.375rem;border-width:1px;--tw-border-opacity: 1;border-color:rgba(0,22,83,var(--tw-border-opacity));padding:.25rem .5rem;font-size:.75rem;line-height:1rem;--tw-text-opacity: 1;color:rgba(0,22,83,var(--tw-text-opacity))}.row-btn[_ngcontent-%COMP%]:hover{--tw-text-opacity: 1;color:rgba(255,255,255,var(--tw-text-opacity))}"]}),n})();var a=i(9133),L=i(2911);let T=(()=>{class n{constructor(t){this.route=t,this.headers=[{name:"id",title:"id",hidden:!0,value:""},{name:"name",title:"full_name",type:"text",value:"",validators:[{validatorFn:a.kI.required,message:"full_name_required"}]},{name:"email",title:"email",type:"email",value:"",validators:[{validatorFn:a.kI.required,message:"email_required"},{validatorFn:a.kI.email,message:"email_email"}]},{name:"password",title:"password",type:"password",value:"",validators:[{validatorFn:a.kI.required,message:"password_required"},{validatorFn:a.kI.minLength(8),message:"password_min_ch"}]},{name:"password_confirmation",title:"password_confirmation",type:"password",value:"",validators:[{validatorFn:a.kI.required,message:"password_confirmation_required"},{validatorFn:a.kI.minLength(8),message:"password_confirmation_min_ch"}]},{title:"city",name:"city",type:"text"},{title:"sexe",name:"sexe",type:"text"},{title:"phone_number",name:"phone",type:"phone"}]}ngOnInit(){this.route.paramMap.subscribe(t=>{if("edit"==t.params.type){let o=-1;this.headers.map((l,R)=>{"password"==l.name&&(o=R)}),this.headers.splice(o,1),this.headers.splice(o,1)}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(s.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-client-form"]],decls:1,vars:1,consts:[["pluralName","clients","singleName","client","icon","fas fa-user","redirectLink","/dashboard/clients/list","retrieveURL","users/:id","storeURL","users","updateURL","users",3,"headers"]],template:function(t,o){1&t&&e._UZ(0,"app-form",0),2&t&&e.Q6J("headers",o.headers)},directives:[L.U],styles:[""]}),n})();var p=i(1892);let I=(()=>{class n{constructor(){this.headers=[{name:"id",title:"id"},{name:"name",title:"full_name"},{name:"email",title:"email",search:!0},{name:"city",title:"city"},{name:"phone",title:"phone_number"},{name:"created_at",title:"created_at",type:"date"},{name:"active",title:"status",type:"tag",tagsColors:{[p.m.CREATED]:"bg-blue-200",[p.m.ENABLED]:"bg-green-200"}}],this.tableButtons=[{name:"block",title:"block",icon:"fas fa-ban",color:"blue",dataField:"users.id",request:{url:"users",method:"delete"},confirmation:{title:"are_you_sure",text:"block_account_conf_msg",confirmButtonText:"yes",confirmButtonColor:"red",showCancelButton:!0,cancelButtonText:"no",icon:"warning"}},{name:"enable",title:"enable",icon:"fas fa-lightbulb",color:"blue",dataField:"users.id",request:{url:"users/enable",method:"put"},confirmation:{title:"are_you_sure",text:"enable_account_conf_msg",confirmButtonText:"yes",confirmButtonColor:"red",showCancelButton:!0,cancelButtonText:"no",icon:"warning"}}],this.buttons=[]}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-client-list"]],decls:1,vars:5,consts:[["pluralName","clients","singleName","client","primaryKey","id","deleteURL","users/:id","retrieveURL","users","displayLink","/dashboard/clients/display","editLink","/dashboard/clients/form/edit","createLink","/dashboard/clients/form/create","icon","fas fa-users",3,"headers","rowButtons","tableButtons","showSortFilter","showDeleteButton"]],template:function(t,o){1&t&&e._UZ(0,"app-table",0),2&t&&e.Q6J("headers",o.headers)("rowButtons",o.buttons)("tableButtons",o.tableButtons)("showSortFilter",!1)("showDeleteButton",!1)},directives:[m.a],styles:[""]}),n})();const F=[{path:"",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-client"]],decls:1,vars:0,template:function(t,o){1&t&&e._UZ(0,"router-outlet")},directives:[s.lC],styles:[""]}),n})(),children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:I,canActivate:[i(8498).u]},{path:"form/:type",component:T},{path:"display",component:B}]}];let Z=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[s.Bz.forChild(F)],s.Bz]}),n})(),U=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[c.ez,Z,h.G,d.aw]]}),n})()}}]);